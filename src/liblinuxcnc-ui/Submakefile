LIBLINUXCNC_UI_SRC := \
    liblinuxcnc-ui/new.cc \
    liblinuxcnc-ui/free.cc \
    liblinuxcnc-ui/connect.cc \
    liblinuxcnc-ui/task-state.cc \
    liblinuxcnc-ui/task-mode.cc \
    liblinuxcnc-ui/mdi.cc \
    liblinuxcnc-ui/coolant.cc \
    liblinuxcnc-ui/lube.cc \
    liblinuxcnc-ui/jog-mode.cc \
    liblinuxcnc-ui/program.cc \
    liblinuxcnc-ui/command-nml.cc \
    liblinuxcnc-ui/error-nml.cc \
    liblinuxcnc-ui/status-nml-update.cc \
    liblinuxcnc-ui/get-status-nml.cc \
    liblinuxcnc-ui/get-command-channel-nml.cc \


-include objects/liblinuxcnc-ui/getter.mak
Makefile : objects/liblinuxcnc-ui/getter.mak
Makefile : objects/liblinuxcnc-ui/liblinuxcnc-ui-getters.h

LUIGEN := python liblinuxcnc-ui/luigen.py
objects/liblinuxcnc-ui/getter.mak: liblinuxcnc-ui/luigen.py
	$(LUIGEN) makefile $@.tmp && mv -f $@.tmp $@
objects/liblinuxcnc-ui/liblinuxcnc-ui-getters.h: liblinuxcnc-ui/luigen.py
	$(LUIGEN) hfile $@.tmp && mv -f $@.tmp $@

USERSRCS += $(LIBLINUXCNC_UI_SRC)
TARGETS += ../lib/liblinuxcnc-ui.so ../lib/liblinuxcnc-ui.so.0
INCLUDES += liblinuxcnc-ui objects/liblinuxcnc-ui

../include/%.h: ./liblinuxcnc-ui/%.h
	cp $^ $@

../include/%.h: ./objects/liblinuxcnc-ui/%.h
	cp $^ $@

$(call TOOBJSDEPS, $(LIBLINUXCNC_UI_SRC)) : EXTRAFLAGS = -fPIC

../lib/liblinuxcnc-ui.so.0: $(call TOOBJS,$(LIBLINUXCNC_UI_SRC)) ../lib/liblinuxcnc.a ../lib/liblinuxcncini.so.0 ../lib/libnml.so.0
	$(ECHO) Linking $(notdir $@)
	@mkdir -p ../lib
	@rm -f $@
	$(Q)$(CXX) $(LDFLAGS) -Wl,-soname,$(notdir $@) -shared -o $@ $^

